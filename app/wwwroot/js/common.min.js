function Errors(n){function o(){function t(n){_.forEach(n,function(t,i){f===i&&n[i]()})}if(null==n)return!1;e?t(r):t(u)}function s(n){$("#payment_form_information").find(".error").css("display","block");$("#payment_form_information_error").css("display","block").text(n)}function h(){alert("dataNotFound")}function c(){return console.log("Errors object, productItemNotFound"),"productItemNotFound"}function l(){return console.log("Errors object, storeNotFound"),"storeNotFound"}function i(){return console.log("Errors object, serverError"),"serverError"}function a(n){s(n)}function t(){return console.log("Errors object, timeDelation"),"timeDelation"}var f=n,e=!0,r={},u={};this.error=function(){o()};r={"ProductItem - data not found":c,"Store - data not found":l,"Store - Server error":i,"Store - Timing delation":t,"Buy -Transaction Sg Failed":a,"Buy - Server error":i,"Buy - Timing delation":t,"Timing delation":t};u={"data not found":h,"Server error":i,"Timing delation":t}}var SHOW_DEBUG=!0,TIME_DELAY=3,appL10n,LANG,Utils;ErrorMsg={};ErrorMsg.CustomActionResultErrorView="CustomActionResultErrorView";ErrorMsg.NotEquals="NotEquals";ErrorMsg.LessMin="LessMin";ErrorMsg.NoData="NoData";ErrorMsg.IsEmpty="IsEmpty";ErrorMsg.HasBeenDeactivated="HasBeenDeactivated";ErrorMsg.MaxLimitAwait="MaxLimitAwait";ErrorMsg.ErrorInUpdateDb="ErrorInUpdateDb";ErrorMsg.InputDataIncorrect="InputDataIncorrect";ErrorMsg.ChestNotExist="ChestNotExist";ErrorMsg.CatalogNotExist="CatalogNotExist";ErrorMsg.UploadedImageNotSetInInstance="UploadedImageNotSetInInstance";ErrorMsg.TimeDelation="TimeDelation";ErrorMsg.NotEnoughCc="NotEnoughCc";ErrorMsg.NotEnoughResources="NotEnoughResources";ErrorMsg.ProductNotFound="ProductNotFound";ErrorMsg.CcCountNotExsist="CcCountNotExsist";ErrorMsg.CanNotCreateCcCount="CanNotCreateCcCount";ErrorMsg.TransactionCcFailed="TransactionCcFailed";ErrorMsg.PremiumActivatedFail="PremiumActivatedFail";ErrorMsg.NotAutorized="NotAutorized";ErrorMsg.DbError="DbError";ErrorMsg.PremiumNotExsist="PremiumNotExsist";ErrorMsg.PlanetNotExsist="PlanetNotExsist";ErrorMsg.PlanetNameNotExsist="PlanetNameNotExsist";ErrorMsg.PlanetNameNotUnic="PlanetNameNotUnic";ErrorMsg.TaskNotExist="TaskNotExist";ErrorMsg.TaskNotForThisUser="TaskNotForThisUser";ErrorMsg.TaskTargetPlanetNotExist="TaskTargetPlanetNotExist";ErrorMsg.BuildUpgradeTimeNotOver="BuildUpgradeTimeNotOverr";ErrorMsg.PremiumPriceNotSet="PremiumPriceNotSet";ErrorMsg.PremiumDurationNotSet="PremiumDurationNotSet";ErrorMsg.UnitNameNotExist="UnitNameNotExist";ErrorMsg.PlanetChangeOwner="PlanetChangeOwner";ErrorMsg.PlanetNotSetInInstance="PlanetNotSetInInstance";ErrorMsg.UserIdNotSetInInstance="UserIdNotSetInInstance";ErrorMsg.UserResourceNotSetInInstance="UserResourceNotSetInInstance";ErrorMsg.TargetOwnerIsYou="TargetOwnerIsYou";ErrorMsg.TargetUserIsYou="TargetUserIsYou";ErrorMsg.ProportionNotSetInModel="ProportionNotSetInModel";ErrorMsg.ServerTimeIsWrong="ServerTimeIsWrong";ErrorMsg.ResourceNameIsWrong="ResourceNameIsWrong";ErrorMsg.TargetResourceIsFull="TargetResourceIsFull";ErrorMsg.MathError="MathError";ErrorMsg.DataIsOldRepeatRequest="DataIsOldRepeatRequest";ErrorMsg.TimeNotEnd="TimeNotEnd";ErrorMsg.JumpMotherInProgress="JumpMotherInProgress";ErrorMsg.JupmMotherIsCurrentSystem="JupmMotherIsCurrentSystem";ErrorMsg.TaskCompleted="TaskCompleted";ErrorMsg.OverMaxLength="OverMaxLength";ErrorMsg.SystemIdNotSet="SystemIdNotSet";ErrorMsg.AllianceNotExist="AllianceNotExist";ErrorMsg.AllianceUserNotExist="AllianceUserNotExist";ErrorMsg.NotPermitted="NotPermitted";ErrorMsg.YouAreBlockedInThisChannel="YouAreBlockedInThisChannel";ErrorMsg.YouCantLeftNpcAlliance="YouCantLeftNpcAlliance";ErrorMsg.AllianceActionInBlockedState="AllianceActionInBlockedState";ErrorMsg.AllianceNameNotValid="AllianceNameNotValid";ErrorMsg.AllianceNameNotUnic="AllianceNameNotUnic";ErrorMsg.YouInAlliance="YouInAlliance";ErrorMsg.UserInAlliance="UserInAlliance";ErrorMsg.AllianceRoleNotChanged="AllianceRoleNotChanged";ErrorMsg.IsNotCurrentUser="IsNotCurrentUser";ErrorMsg.UserNotHasHubGroup="UserNotHasHubGroup";ErrorMsg.UserNameNotExsist="UserNameNotExsist";ErrorMsg.UserConnectionNotUnic="UserConnectionNotUnic";ErrorMsg.PasswordIncorrect="PasswordIncorrect";ErrorMsg.ChannelNotExist="ChannelNotExist";ErrorMsg.BookMarkLimitDone="BookMarkLimitDone";ErrorMsg.BookmarkIsExist="BookmarkIsExist";ErrorMsg.NotUsedServerMethod="NotUsedServerMethod";ErrorMsg.Deprecated="Deprecated";ErrorMsg.ChannelNameNotValid="ChannelNameNotValid";ErrorMsg.InvalidFormat="InvalidFormat";ErrorMsg.IsEqual="IsEqual";ErrorMsg.ChannelNotDeleted="ChannelNotDeleted";ErrorMsg.PasswordNotUpdated="PasswordNotUpdated";ErrorMsg.MaxChannelsLimit="MaxChannelsLimit";ErrorMsg.Locked="Locked";ErrorMsg.Canceled="Canceled";ErrorMsg.CantRegisterCandidatNotEnoughPvP="CantRegisterCandidatNotEnoughPvP";ErrorMsg.CantRegisterCandidatAlreadyExist="CantRegisterCandidatAlreadyExist";ErrorMsg.TimeVotingIsOver="TimeVotingIsOver";ErrorMsg.TimeVotingIsNotOver="TimeVotingIsNotOver";ErrorMsg.IsNotVotePeriod="IsNotVotePeriod";ErrorMsg.UserHasAlreadyCastVote="UserHasAlreadyCastVote";ErrorMsg.OfficerIsAlreadyExist="OfficerIsAlreadyExist";ErrorMsg.VotingRunnerVoteIsStartedBefore="VotingRunnerVoteIsStartedBefore";ErrorMsg.VotingRunnerVoteIsFinishedBefore="VotingRunnerVoteIsFinishedBefore";ErrorMsg.VotingRunnerStartedNotRunned="VotingRunnerStartedNotRunned";ErrorMsg.VotingRunnerEndedNotFinished="VotingRunnerEndedNotFinished";ErrorMsg.VotingRunnerStartedErrorInRun="VotingRunnerStartedErrorInRun";ErrorMsg.VotingRunnerEndedErrorInFinished="VotingRunnerEndedErrorInFinished";ErrorMsg.VotingRunnerStartInProgress="VotingRunnerStartInProgress";ErrorMsg.VotingRunnerEndInProgress="VotingRunnerEndInProgress";ErrorMsg.VotingRunnerTryErrorMaxLimit="VotingRunnerTryErrorMaxLimit";ErrorMsg.TechDisabled="TechDisabled";ErrorMsg.TechInProgress="TechInProgress";Object.freeze(ErrorMsg);Errors.GetMessage=function(n){return n&&n.hasOwnProperty("responseJSON")&&n.responseJSON.hasOwnProperty("exceptionMessage")&&n.responseJSON.exceptionMessage?n.responseJSON.exceptionMessage:""};Errors.$defaultErrorResponce=function(n){var t=Errors.GetMessage(n);console.log("errorAnswer",{errorAnswer:n,msg:t})};Errors.GetHubMessage=function(n){var t="";return n&&n.hasOwnProperty("message")?t=n.message:typeof n=="string"&&(t=n),t};Errors.Exception=function(n,t,i,r){var u={ExceptionData:t,ExceptionType:n||"Exception",InnerMessage:i,InnerException:r};return Utils.Console.Error(u.InnerMessage,u),u};Errors.ClientNotImplementedException=function(n,t,i){Errors.Exception("ClientNotImplementedException",n,t,i)};Errors.ClientNullReferenceException=function(n,t,i,r,u){return Errors.Exception("ClientNullReferenceException",{data:n,argumentName:t,source:i},r||"is required",u)};Errors.ClientTypeErrorException=function(n,t,i,r,u){return Errors.Exception("ClientTypeErrorException",{data:n,argType:typeof t,argConstructorName:t?t.constructor.name:"",targetType:i,source:r},u||"is required",u)};Errors.ClientDeprecatedException=function(n,t,i){return Errors.Exception("ClientDeprecatedException",n,t,i)};Errors.ClientNotEqualException=function(n,t,i){return Errors.Exception("ClientNotEqualException",n,t,i)};Errors.ClientInvalidDataException=function(n,t,i,r,u){return Errors.Exception("InvalidDataException",{data:n,source:t,argName:i},r,u)};appL10n={};LANG="",function(){function f(n){var t=$.cookie(i);return LANG=t,n&&(t=_.upperFirst(t.toLowerCase()).trim()),t}function e(){return r||(r=f(!0)),r}function u(){var n=[],i=$.cookie(t);return i&&(n=JSON.parse(i)),n}function o(){for(var e,o,s=window.location.pathname,f=u(),t=null,r=0;r<f.length;r++)if(e=f[r].toLowerCase(),o=s.search(e),undefined!=o&&-1!==o&&!(1<e)){t=f[r];break}t||(t=$.cookie(n));$.cookie(i,t)}var t="_langs",n="_defaultLang",i="_currLang",r;LANG=$.cookie(i)||$.cookie(n)||"en";appL10n.getL10NCurrentLanguage=e;appL10n.getLanguagesFromServer=function(){$.ajax({url:"/api/translate/getSupportedLangs",dataType:"json",method:"get",success:function(i){$.cookie(t,i[t],{expires:14,path:"/"});$.cookie(n,i[n].slice(-2).toLowerCase(),{expires:14,path:"/"});o()}})};appL10n.getSupportedLanguages=u}();Utils={CoreApp:{}};Utils.RepoKeys={LsKeys:{FloatVoteParams:"float-vote-params",VoteRegistredData:"vote-officer-registrated-data"},HtmlKeys:{ResourceContainerId:"#current-resources",BuildContainerId:"#buildContainer",MapControlContainerId:"#map-control",Value:"value",Itemid:"itemid",Data:"data",Name:"name",Type:"type",Search:"search",Option:"option",Section:"section",Slider:".slider",Id:"id",CssActive:"active",ServerMessage:"server-message",BuildControl:"build-control",Info:"info",Action:"action",Upgrade:"upgrade",DropContainer:"drop-container",Level:"level",Property:"property",Properties:"properties",Price:"price",ButtonSubmit:"button-sumbit",PriceTimeproduction:"price-timeproduction",CurrentValue:"currentvalue",NextValue:"nextvalue",ForCc:"forcc",CssNewItem:"newitem",Timer:"timer",StartTime:"start-time",Duration:"duration",Progress:"progress",ResourceTransferFormId:"#resource-transfer-form",TargetNameTranslate:"targetNameTranslate",Losses:"losses",TargetTransferOwnList:"#target-transfer-own-list",BtnSendAll:"btn-send-all",ResourceExchangeFormId:"#resource-exchange-form",ExtractionFormId:"#extraction-form",E:"e",Ir:"ir",Dm:"dm",Cc:"cc",Current:"current",Target:"target",Max:"max",Range:"range",Base:"base",Source:"source",EstatesList:"estates-list",BtnGalaxyInfo:"#btnGalaxyInfo",BtnSectorInfo:"#btnSectorInfo",BtnPlanetInfo:"#btnPlanetInfo",BtnStarInfo:"#btnStarInfo",btnJumpToSector:"#btnJumpToSector",BtnJumpToPlanetoid:"#btnJumpToPlanetoid",BtnJumpToMother:"#btnJumpToMother",BtnJumpToUserPlanet:"#btnJumpToUserPlanet",BtnJumpToGalaxy:"#btnJumpToGalaxy",BtnOpenBookmarks:"#btnOpenBookmarks",HangarItemsKeys:function(){return[this.Drone,this.Frigate,this.Battlecruiser,this.Battleship,this.Drednout]},Drone:"drone",Frigate:"frigate",Battlecruiser:"battlecruiser",Battleship:"battleship",Drednout:"drednout",HangarDataKey:"hangar",TotalItems:"total-items",Toggle:"toggle",StoreProductId:"store-product-id",ProductName:"product-name",ProductTranslateName:"product-translate-name",ProductCost:"product-cost",ProductCurrencyCode:"product-currency-code",ProductTypeId:"product-type-id",ProductTypeNativeName:"product-type-native-name",ProductTypeTranslateName:"product-type-translate-name",StoreItemsListId:"#store-items-list",StoreSelectProductCategoryId:"#store-select-product-category"},DataKeys:{Progress:"Progress",StorageResources:"StorageResources",ResourcesView:"ResourcesView",MaterialResource:"MaterialResource",Level:"Level",Losses:"Losses",Units:"Units",Action:"Action",Update:"Update",Properties:"Properties",Price:"Price",Data:"Data",PropertyName:"PropertyName",CurrentValue:"CurrentValue",NextValue:"NextValue",IsProgress:"IsProgress",Target:"Target",Source:"Source",Current:"Current",Max:"Max",E:"E",Ir:"Ir",Dm:"Dm",Cc:"Cc",NativeName:"NativeName",IndustrialComplex:"IndustrialComplex",CommandCenter:"CommandCenter",SpaceShipyard:"SpaceShipyard",Shipyard:"Shipyard",Storage:"Storage",Turel:"Turel",Laboratory:"Laboratory",LaboratoryBuild:"LaboratoryBuild",EnergyConverter:"EnergyConverter",ExtractionModule:"ExtractionModule",ExtractionPerHour:"ExtractionPerHour",Power:"Power",Percent:"Percent",TimeProduction:"TimeProduction",_unitListNames:[],UnitListNames:function(){var t,n;if(this._unitListNames.length>0)return this._unitListNames;for(t=Utils.RepoKeys.HtmlKeys.HangarItemsKeys(),n=0;n<t.length;n++)this._unitListNames.push(_.upperFirst(t[n]));return this._unitListNames},BattleResults:{AtackerWin:"AtackerWin",AtackerEscape:"AtackerEscape",DefenderWin:"DefenderWin",DeadHeat:"DeadHeat"},Activated:"Activated",ItemProgress:"ItemProgress"},EstateListKeys:{PlanetId:"PlanetId",Name:"Name",Type:"Type",OwnId:"OwnId",Sector:"Sector",System:"System",Galaxy:"Galaxy",TextureTypeId:"TextureTypeId"},_estateListKeys:{},LowerEstateListKeys:function(){var n,t;if($.isEmptyObject(this._estateListKeys)){n=this.EstateListKeys;for(t in n)n.hasOwnProperty(t)&&(this._estateListKeys[t]=n[t].toLowerCase())}return this._estateListKeys},StorageProperties:function(){return["Energy","Iridium","DarkMatter","TransferLosses"]},EnergyConverterProperties:function(){return["ConvertLosses"]},ExtractionModuleProperties:function(){return["Power"]},TurelProperties:function(){return[]},SpaceShipyardProperties:function(){return["Speed"]}},function(){var n={};n._buildPlanshetIds=null;n._buildIds=["industrial-complex","command-center","space-shipyard","laboratory"];n._rebuildIds=function(){var t=n._buildIds,i,r;n._buildPlanshetIds=[];for(i in t)t.hasOwnProperty(i)&&(r="build-collection-",n._buildPlanshetIds.push(r+t[i]))};n.GetPlanshetIds=function(){return n._buildPlanshetIds===null&&n._rebuildIds(),n._buildPlanshetIds};n.GetBuildIdByIdx=function(t){return n._buildPlanshetIds===null&&n._rebuildIds(),n._buildPlanshetIds[t]};Utils.RepoKeys.DataKeys.BuildIds=n;Object.freeze(Utils.RepoKeys.HtmlKeys);Object.freeze(Utils.RepoKeys.DataKeys)}(),function(){Utils.LocalStorage={TIME_STORAGE_PERIOD:1,_localStorage:{},_IsValidKey:function(n){return n&&typeof n=="string"&&n.length>1?!0:(SHOW_DEBUG&&Utils.Console.Error("LocalStorage key not valid",n),!1)},_getLSKeys:function(){return Object.keys(window.localStorage)},_ignoreCleanKeys:[],AddKeyToIgnoreClean:function(n){var t=_.includes(this._ignoreCleanKeys,n);t||this._ignoreCleanKeys.push(n)},_getKesToClean:function(){return _.xor(this._getLSKeys(),this._ignoreCleanKeys)},SaveInStorage:function(n,t,i,r){return this._IsValidKey(n)?(this._saveToLocal(n,t),Modernizr.localstorage)?(window.localStorage.setItem(n,JSON.stringify(t)),i||$.cookie(n,!0,{expires:r||this.TIME_STORAGE_PERIOD,path:"/"}),!0):(SHOW_DEBUG&&console.log("Local storage not suprted, data  will be saved in memory"),!1):!1},GetFromStorage:function(n,t){var r,i;if(!this._IsValidKey(n))return!1;if(!t&&(r=this._getFromLocal(n),r))return r;if(Modernizr.localstorage){if(i=JSON.parse(window.localStorage.getItem(n)),t)return i;if(i)return this._saveToLocal(n,i),i}return!1},ClearStorageAndCookie:function(){var n=this;_.forEach(n._getKesToClean(),function(t){n.RemoveItem(t)})},RemoveItem:function(n){this._IsValidKey(n)&&(delete this._localStorage[n],$.removeCookie(n),window.localStorage.removeItem(n))},_saveToLocal:function(n,t){this._localStorage[n]=_.cloneDeep(t)},_getFromLocal:function(n){var t=_.find(this._localStorage,function(t){return t[n]===n});return t?_.cloneDeep(t):!1}}}(),function(){function t(){var n,t;return Modernizr.canvas?(n=document.createElement("canvas"),(n.getContext&&n.getContext("2d"))?(t=n.toDataURL("image/webp").indexOf("data:image/webp")===0,n.remove(),t):!1):!1}function i(){if(window.localStorage){var i=window.localStorage.getItem(n);return i==="true"?!0:i==="false"?!1:(i=t(),window.localStorage.setItem(n,i),i)}return t()}var n="webp_support";Utils.LocalStorage.AddKeyToIgnoreClean(n);Modernizr.webp=i();Modernizr.webp&&$("html").addClass("webp");Modernizr.addTest("ie",function(){var n=window.navigator.userAgent.toLowerCase(),t=!1;return(/trident/gi.test(n)||/msie/gi.test(n))&&(t=!0,$("html").addClass("ie")),t})}();Utils.XSRF={},function(n){var t=$("body > [name='X-XSRF-TOKEN']").first(),i=t.val()||"";t.remove();n.HeadersGetApiTokenObj=function(){return{"X-XSRF-TOKEN":i}};n.MakeIPostXsrf=function(n,t){var r={};return r["X-XSRF-TOKEN"]=i,r[n]=t,r}}(Utils.XSRF),function(){Utils.FreezeDeep=function(n){var t=typeof n;return(t==="object"||t==="function")&&(Object.freeze(n),Object.getOwnPropertyNames(n).forEach(function(t){n.hasOwnProperty(t)&&n[t]!==null&&(typeof n[t]=="object"||typeof n[t]=="function")&&!Object.isFrozen(n[t])&&Utils.FreezeDeep(n[t])})),n};Utils.ConvertToBool=function(n){return"true"===n?!0:"True"===n?!0:"false"===n||"False"===n||"undefined"===n||"NaN"===n||"0"===n?!1:!!n};Utils.ConvertToInt=function(n){return n instanceof String?Math.floor(parseFloat(n.replace(",","."))):Math.floor(n)};Utils.ConvertToFloat=function(n){return parseFloat(n.toString().replace(",","."))};Utils.ConvertObjToDictionary=function(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push({key:t,value:n[t]});return i};Utils.CheckObjIsEmpty=function(n){var t=!0;return n?(_.forEach(n,function(){return t=!1,!1}),t):!1};Utils.GetMaxNumberInArr=function(n){return Math.max.apply(null,n)};Utils.GetMinNumberInArr=function(n){return Math.max.apply(null,n)};Utils.GetReturnUrl=function(){var n=window.location.pathname;return n==="/"&&(n="/"+LANG),"?ReturnUrl="+n};Utils.GetUrl=function(n){var t="https://"+window.location.host+"/"+LANG;return n?(_.startsWith(n,"/")||(n="/"+n),_.endsWith(n,"/")||(n=n+"/"),t+=n):t+="/",t};Utils.IsNumeric=function(n){return/^\d+$/.test(n)};Utils.RedirectToAction=function(n){window.location.href=this.GetUrl(n)};Utils.RandomBool=function(){var t=_.random(0,1,!0),n=!1;return t>.5&&(n=!0),n};Utils.UpdateObjData=function(n,t){_.isEqual(n,t)||_.forEach(t,function(t,i){typeof t=="object"&&t!==null?(n[i]||(n[i]=t.pop?[]:{}),Utils.UpdateObjData(n[i],t)):n[i]!==t&&(n[i]=t)})};Utils.UpdateObjFromOther=function(n,t){if(t){var i=Object.keys(n);_.forEach(i,function(i){t[i]&&(typeof n[i]=="object"?Utils.UpdateObjFromOther(n[i],t[i]):n[i]=t[i])})}};Utils.IsNotEmptyString=function(n){return n&&typeof n=="string"&&n.length>0};Utils.IPropertyObserverable=function(n,t,i){function f(){function e(i){return u.IBasePropertyInfo(r,i,t,n)}function o(t){n[i].notifyObservers(u.INotyfyModel(t,n[i]))}var f=this,r;return this._rootObject=n,r=n[t],this.WhatchPropertyName=t,this.ObserverablePropertyName=i,n[i]=new BABYLON.Observable,Object.defineProperty(n,f.WhatchPropertyName,{get:function(){return r},set:function(n){o(e(n));r=n}}),f}var u=Utils.ModelFactory,r={rootObject:n,watchPropertyName:t,observerableName:i};if(!n)throw Errors.ClientNullReferenceException(r,"babylonObject");if(typeof n!="object")throw Errors.ClientTypeErrorException(r,n,"object","Utils.CreateIPropertyObserverable");if(!n.hasOwnProperty(t))throw Errors.ClientNullReferenceException(r,"watchPropertyName");if(typeof t!="string")throw Errors.ClientTypeErrorException(r,t,"string","Utils.CreateIPropertyObserverable");if(typeof i!="string")throw Errors.ClientTypeErrorException(r,i,"string","Utils.CreateIPropertyObserverable");if(n[i])throw Errors.ClientNotImplementedException(r,"обсервер уже существует у переданного меша");return new f};Utils.StrToRef=function(n,t){t||(t=window);var i,r=_.split(n,".");return _.forEach(r,function(n){if(!i){if(!t[n])return!1;i=t[n];return}if(i[n]){i=i[n];return}return!1}),i}}(),function(){Utils.LangSimple=function(n,t,i){function r(){this.En=n;this.Es=t;this.Ru=i}return r.prototype.getCurrent=function(){var n=appL10n.getL10NCurrentLanguage();return n||(n="En"),this[n]},new r};Utils.SupportedLangs=function(){return Utils.LangSimple("en","es","ru")};Utils.CreateLangSimple=function(n,t,i){return Utils.LangSimple(n,t,i)};Utils.LangField=function(n){function t(){this.Name="";this.Description=""}t.prototype.updateFromOther=function(t){t&&(t.hasOwnProperty("Name")&&t.Name&&(this.Name=t.Name),n.hasOwnProperty("Description")&&t.Description&&(this.Description=t.Description))};var i=new t;return i.updateFromOther(n),i};Utils.TranslateTextField=function(n){return Utils.L10N(n)};Utils.L10N=function(n){function t(){this.En=Utils.LangField();this.Es=Utils.LangField();this.Ru=Utils.LangField()}t.prototype.getKeys=function(){return Object.keys(this)};t.prototype.updateFromOther=function(n){n&&Utils.UpdateObjFromOther(this,n)};t.prototype.getCurrent=function(){var n=appL10n.getL10NCurrentLanguage();return n||(n="En"),this[n]};var i=new t;return n&&i.updateFromOther(n),i}}();Utils.CssHelper={SetUrl:function(n){return"url('"+n+"')"}},function(){Utils.SetHtmlAttr=function(n){return"["+n+"]"};Utils.ClearHtmlAttr=function(n,t){var i=n.replace(/[\]\[]/g,"");return t&&(i=i.substr(5)),i};Utils.PrepareHtmlAttributeSelector=function(n,t){var i=n.join("-");return t&&(i="["+i+"]"),i.toLowerCase()};Utils.GenAttrItem=function(n,t,i){var r="itemid";return n&&(r+="="+n.join("-")),t&&(r="["+r+"]"),i||(r=r.toLowerCase()),r};Utils.GenAttrName=function(n,t,i){var r="name";return n&&(r+="="+n.join("-")),t&&(r="["+r+"]"),i||(r=r.toLowerCase()),r};Utils.GenAttrDataVal=function(n,t,i,r){var f="data-"+n,u;return i||(f=f.toLowerCase()),u="="+t,r&&(u=u.toLowerCase()),"["+f+u+"]"};Utils.GenAttrDataName=function(n,t,i,r){var u="data-"+n.join("-");return t&&(u=u+"="+t),i||(u="["+u+"]"),r||(u=u.toLowerCase()),u};Utils.SetAttrDataVal=function(n,t,i,r){var u="data-"+t;r||(u=u.toLowerCase());n.attr(u,i)};Utils.GetParent=function(n,t){for(var r=Utils.RepoKeys.HtmlKeys,i=n.parent();t!==i.attr(r.Itemid);)i=i.parent();return i};Utils.GetParentElemByClass=function(n,t){for(var i=n;!i.hasClass(t);){if(i.is("body"))break;i=i.parent()}return i};Utils.GetParentValue=function(n,t,i,r,u,f){var c=0,l=1,a=3,e=n,h,o,v,y,s,k,d;if(r)for(h=r;h>0;h--)e=e.parent();else for(t===c&&(o="#"+i),t===l&&(o="[itemid="+i+"]"),v=2,t===v&&(o="[data-"+i+"]"),u!==null&&t===a&&(o="[data-"+i+"="+u+"]"),y=4,o=t===y?"."+i:i;!e.is($(o));)if(e=e.parent(),e.is($("body")))return console.log("Parent not found"),null;if(f===c)return e.attr("id");if(f===l)return e.attr("itemid");if(f===a)return e.data(i);if(typeof f=="string"){var p=e.data(),w=0,b=null;for(s in p){if(p.hasOwnProperty(s)){if(w>0)return console.log("Data variable. Data count > 0"),null;k="obj";d="name";b=f===d?s:f===k?e.data():e.data(s)}w++}return b}return i===null&&(i=undefined),e.data(i)};Utils.GetKeyFromObject=function(n){for(var t in n)if(n.hasOwnProperty(t))return t;return null};Utils.ObjectToHtmlAttributes=function(n,t){var f="",i,u,r;for(i in n)if(n.hasOwnProperty(i)){for(u=!0,r=0;r<t.length;r++)if(i===t[r]){u=!1;break}u&&(f+=i+'="'+n[i]+'" ')}return f};Utils.SetSpanText=function(n,t){var i=t?"class="+t:"";return"<span "+i+">"+n+"<\/span>"}}();Utils.Console={H1:function(n,t){console.info("%c"+n,this.ConsoleStyles.h1,t)},H2:function(n,t){console.info("%c"+n,this.ConsoleStyles.h2,t)},H3:function(n,t){console.info("%c"+n,this.ConsoleStyles.h3,t)},Bold:function(n,t){console.log("%c"+n,this.ConsoleStyles.bold,t)},Warn:function(n,t){console.warn("%c"+n,this.ConsoleStyles.warn,t)},Error:function(n,t){console.error("%c"+n,this.ConsoleStyles.warn,t)},Table:function(n){console.table(n)},ConsoleStyles:{h1:"font: 2.5em/1 Arial; color: crimson;",h2:"font: 2em/1 Arial; color: orangered;",h3:"font: 1.5em/1 Arial; color: olivedrab;",bold:"font: bold 1.3em/1 Arial; color: midnightblue;",warn:"padding: 0 .5rem; background: crimson; font: 1.6em/1 Arial; color: white;"}},function(){Utils.Request=function(n,t,i,r,u,f){i instanceof Object||(i={id:i});var e={url:n,method:r?r:"GET",data:i,success:function(n){t instanceof Function&&t(n)},error:function(n){u instanceof Function&&(SHOW_DEBUG||f)&&u(n)}};this.getJson=function(){$.ajax(e)};this.getHtml=function(){e.type="html";$.ajax(e)}};Utils.SaveLogToFile=function(n,t,i,r,u){if(n&&!r){var f={FileData:JSON.stringify(n),FileName:t,Ext:u||".json",Catalog:i||"wwwroot/log",SaveToCdn:!1};return $.ajax({url:"/api/AppApi/PostSaveDataToFile/",method:"POST",data:f,headers:Utils.XSRF.HeadersGetApiTokenObj()})}}}();Utils.Event={},function(){function n(n,t){if(!t)return!1;var i=!1,r=$._data(n[0]?n[0]:n,"events");return r&&$.each(r,function(n){n===t&&(i=!0)}),i}Utils.Event.HasEvent=n;Utils.Event.HasScroll=function(t){return n(t,"DOMMouseScroll")||n(t,"mousewheel")||n(t,"onmousewheel")};Utils.Event.HasClick=function(t){return n(t,"click")};Utils.Event.HasResize=function(t){return n(t,"resize")};Utils.Event.HasHover=function(t){return n(t,"mouseenter")}}();Utils.PatternFactory={},function(){function n(n){function e(n,i){for(var r in t)t.hasOwnProperty(r)&&t[r].Update(n||u,i)}function o(n){for(var i in t)if(t.hasOwnProperty(i)&&_.isEqual(t[i],n))return;n.hasOwnProperty("Update")&&(n[r]=_.uniqueId(f),t.push(n))}function s(n){_.remove(t,function(t){return t[r]===n[r]})}var i={},u=n,t=[],r="_observerUniqueId",f="_observer_";return i.Subscribe=o,i.NotifyAll=e,i.Unsubscribe=s,i.GetObservers=function(){return t},i}function t(){function i(){return t.length}function u(n){i()>=r&&_.remove(t,0);t.push(n)}function f(){return t.pop()}function e(){t=[]}var n={},r=20,t=[];return n.Count=i,n.Push=u,n.Pop=f,n.Clear=e,n}Utils.PatternFactory.Observer=n;Utils.PatternFactory.StackCommands=t}();Utils.Guid={},function(n){function r(){this.Add=null;this.Get=null;this.Clean=null;this.Update=null;this.GetFromElem=null}var i,t;n.CreateQuickGuid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)};n.CreateGuid=function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t==="x"?i:i&3|8).toString(16)})};i=new r;i.Add=function(n,t,i){var r=i||$(n);return r&&r.attr("data-guid",t),r};i.Get=function(n){return $("[data-guid="+n+"]")};i.Clean=function(n,t){var i=t||Utils.Guid.Data.Get(n);return i&&i.removeAttr("data-guid"),i};i.Update=function(n,t,i){var r=i||Utils.Guid.Data(n);return r&&(r.removeAttr("data-guid"),r.attr("data-guid",t)),r};i.GetFromElem=function(n){return n.data("guid")};n.Data=i;t=new r;t.Add=function(n,t,i){var r=i||$(n);return r&&r.attr("id",t),r};t.Get=function(n){return $("#"+n)};t.Clean=function(n,i){var r=i||t.Get(n);return r&&r.removeAttr("id"),r};t.Update=function(n,i,r){var u=r||t.Get(n);return u&&u.attr("id",i),u};t.GetFromElem=function(n){return n.attr("id")};n.Id=t}(Utils.Guid);Utils.Parce={},function(n){n.FixSection=function(n){if(typeof n=="object")throw Utils.Console.Error("Utils.FixSection section is object",{section:n});return n||(n=""),typeof n!="string"&&(n+=""),n};n.EndsWithSeparatorAndReplace=function(n,t,i){if(!i)throw new Error("Not set Separator");n=Utils.Parce.FixSection(n);var r=_.endsWith(n,i);return t&&!r?n=n+i:!t&&r&&(n=n.substring(0,n.length-1)),n};n.StartsWithSeparatorAndReplace=function(n,t,i){if(!i)throw new Error("Not set Separator");n=Utils.Parce.FixSection(n);var r=_.startsWith(n,i);return t&&!r?n=i+n:!t&&r&&(n=i+n.substring(1)),n};n.GetUrlInfo=function(n,t){function i(){var r=n?Utils.Parce.EndsWithSeparatorAndReplace(n,!1,"/"):"",i;return this._srcUrl=n,this.Catalog="",this.Sections=_.split(r,"/"),i=this.Sections.length-1,this.FileName=this.Sections[i],this.Catalog=_.take(this.Sections,i),this.Catalog=_.join(this.Catalog,"/"),this.Catalog+="/",this.Ext=null,this._isFile=null,this.IsFile=function(){return this._isFile||typeof this._isFile=="boolean"?this._isFile:(this.FileName.length<=4?this._isFile=!1:(this.Ext=this.FileName.substr(this.FileName.length-4),this._isFile=_.startsWith(this.Ext,".")?!0:!1),this._isFile)},this.Url=r,this.IsRelative=null,this.HasSsl=null,this.HasSchema=null,t&&(this.IsRelative=this.Sections[0]==="/",this.IsRelative||(this.HasSsl=!1,this.HasSchema=this.Sections[0]==="https"||this.Sections[0]==="http",this.HasSchema&&(this.HasSsl=this.Sections[0]==="https"))),this}return new i}}(Utils.Parce);Utils.File={B64toBlob:null,blobToBase64:null},function(n){n.B64toBlob=function(n,t,i){var e,o,r,f,s,u,h;for(t=t||"",i=i||512,e=atob(n),o=[],r=0;r<e.length;r+=i){for(f=e.slice(r,r+i),s=new Array(f.length),u=0;u<f.length;u++)s[u]=f.charCodeAt(u);h=new Uint8Array(s);o.push(h)}return new Blob(o,{type:t})};n.blobToBase64=function(n,t){var i=new FileReader;i.onload=function(){var n=i.result,r=n.split(",")[1];t(r)};i.readAsDataURL(n)}}(Utils.File),function(n){n.ONE_DAY=864e5;n.ONE_DAY_SECOND=86400;n.ONE_HOUR=36e5;n.ONE_HOUR_SECOND=3600;n.ONE_MINUTE=6e4;n.ONE_MINUTE_SECOND=60;n.ONE_SECOND=1e3;n.TIME_CACHE_BUILD=n.ONE_SECOND*20;n.TIME_CACHE_PLANSHET=n.ONE_MINUTE;n.TIME_CACHE_PROFILE=n.ONE_HOUR*8;n.TIME_CACHE_MAP_INFO=n.ONE_MINUTE*10;n.TIME_CACHE_BOOKMARKS=n.ONE_MINUTE*10;n.DELAY_SYNCHRONIZE=n.ONE_MINUTE*10;n.LOCAL_SERVER_DELTA_TIME=0;n.TIME_CACHE_ALLIANCE=n.ONE_DAY*30;n.TIME_CACHE_USER_CHANNELS=n.ONE_DAY*30;n.TIME_CACHE_JOURNAL=n.ONE_DAY*30;n.TIME_CACHE_CONFEDERATION=n.ONE_DAY*30;n.DROP_ELEMENT_ANIMATION=200;n.GetUtcDateTimeFromMsUtc=function(t){var r=n.GetTimeZone(),i=new Date(t);return i.setHours(i.getHours()-r),i};n.GetUtcDateTimeFromSecondUtc=function(t){return n.GetUtcDateTimeFromMsUtc(t*1e3)};n.GetTimeZone=function(){var n=(new Date).getTimezoneOffset();return n/-60};n.DateUTCToLocalDate=function(t){return t.setHours(t.getHours()+n.GetTimeZone())};n.CalculateDateByDifferent=function(t){var r=new Date,i=t-r;return n.ONE_DAY<i?Math.floor(i/n.ONE_DAY)+"d":'<span class="red"> '+Math.floor(i/n.ONE_HOUR)+"h <\/span>"};n.Seconds2Time=function(t,i){var f,e,o;if(i||(i=":"),t<=0)return"00"+i+"00"+i+"00";t||(t=n.GetUtcNow());var u=[],r=0,s=Math.floor(t/n.ONE_DAY_SECOND);return 0!==s&&u.push(s+"d"),r=t%n.ONE_DAY_SECOND,f=Math.floor(r/n.ONE_HOUR_SECOND),f<10&&(f="0"+f),u.push(f+"h"),r=r%n.ONE_HOUR_SECOND,e=Math.floor(r/n.ONE_MINUTE_SECOND),e<10&&(e="0"+e),u.push(e),r=r%n.ONE_MINUTE_SECOND,o=r,o<10&&(o="0"+o),0===s&&u.push(o),u.join(i)};n.GetUtcNow=function(t){var i=new Date,r=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours()-n.GetTimeZone(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())+n.LOCAL_SERVER_DELTA_TIME;return t?r:Math.floor(r/1e3)}}(Utils.Time={}),function(){function n(t){function u(){return n.dateStart||(n.dateStart=Date.now()),n.dateStart}function f(){n.dateStart=u();i||(i=!0,setTimeout(function(){n.dateStart=null;i=!1},t.interval))}function r(){return n.dateStart?n.dateStart+t.interval-Date.now():!1}if(t=$.extend({elem:null,button:"button",actionMethod:null,interval:5e3,targetForm:"#timer",role:"[role=timer]"},t),!t.elem||!t.actionMethod)return{init:function(){}};var i=!1;$(t.elem).find(t.button).click(function(){r()?($(t.targetForm).modal(),$(t.targetForm).find(t.role).text(r())):t.actionMethod(this);f()})}n.dateStart=null;var t={BaseDelay:2e3,Objects:{},Start:function(n,i){this.Objects[n]||(this.Objects[n]={StartTime:Date.now(),Delay:i||t.BaseDelay})},IsTimeOver:function(n){if(!this.Objects[n])return!0;var t=this.Objects[n];return t.StartTime+t.Delay<Date.now()?(delete this.Objects[n],!0):!1},UpdateTimer:function(n,t){this.IsTimeOver(n)?this.Start(n,t):(delete this.Objects[n],this.Start(n,t))},Chronometer:{SetProgressHtmlData:function(n,t){n.attr("data-timer",JSON.stringify(t))},GetProgressHtmlData:function(n){return Utils.ModelFactory.ItemProgress(n.data("timer"))},TimeSelectors:{Timer:"[itemid=timer]",StartTime:"[data-start-time]",Duration:"[data-duration]",Progress:"[data-progress]"},Timers:{},TimerModel:function(){return{DomElem:null,StartTime:null,Duration:null,EndTime:null,Progress:null,CallBack:null,IsStop:null,Update:null}},_getNativeName:function(n,t){for(var r,i=n,u=0;u<t;u++)i=i.parent();return(r=i.attr("itemid"),!r)?(console.log("Error :class Utils.TimeDelay.Chronometer.CreateTimer,  parent name =  не найден  или имя было изменено"),!1):r},CreateTimer:function(n,t,i,r){var u,f;if(r?(r=Utils.ModelFactory.ItemProgress(r),this.SetProgressHtmlData(n,r),u=r):u=this.GetProgressHtmlData(n),f=u.IsProgress,f){var s=this._getNativeName(n,t),e=u.StartTime,o=u.Duration,h=e+o;i instanceof Function||(i=function(){});this.Timers[s]={DomElem:n,StartTime:e,Duration:o,EndTime:h,Progress:f,CallBack:i,IsStop:!1,Update:function(){var i=Math.floor(Time.GetUtcNow()),n=this.EndTime-i,r=Math.abs(n/this.Duration*100-100),t;this.DomElem.prev().css("width",r+"%");this.DomElem.parent().addClass("opacityPlus");n<=0&&(this.DomElem.parent().removeClass("opacityPlus"),this.CallBack(),this.IsStop=!0,this.DomElem.attr("data-progress","false"));t=Time.Seconds2Time(n);this.DomElem.html(t)}}}},SetCustomTimer:function(n,t){t.CallBack instanceof Function||(t.CallBack=function(){});t.IsStop=!1;this.Timers[n]=t},Objects:{},TimerId:null,Start:function(){var n=this;this.TimerId||(this.TimerId=setInterval(function(){var t=n.Timers;for(var i in t)if(t.hasOwnProperty(i)){if(t[i].IsStop){delete t[i];continue}t[i].Update()}},1e3))},Clear:function(n){delete this.Timers[n]},TimeOver:function(n){n&&n()}}};Utils.Timer=n;Utils.TimeDelay=t}();Utils.Response={HomeVideo:null,Sizes:null},function(n){function r(n){var t={},r=n;return t.getVideo=function(){return document.getElementById(r)},t.getSize=function(){return t.size=$(window).width(),t.size},t.canPlay=function(){return t.getSize()>i.Medium},t.onResize=function(){var i=t.canPlay(),n=t.getVideo();i?n.play():n.pause()},t}var i={Small:412,Medium:768,Large:1200},t={Player:null,Init:function(){var n="homeVideoBackground",i=document.getElementById(n);if(!i){Utils.Console.Error("VIDEO NOT EXIST");return}t.Player||(t.Player=r(n));window.addEventListener("resize",function(){t.Player&&t.Player.hasOwnProperty("onResize")&&t.Player.onResize()});setTimeout(function(){t.Player.onResize()},50)}};n.HomeVideo=t;n.Sizes=i}(Utils.Response);Utils.Yandex={_appKey:"trnsl.1.1.20170706T231907Z.f6f8b9db045476bf.78f2c8547d67a6c9e4ec6695c7f8839a9bed5d07",Translate:{}},function(n,t){function u(n,t){i.responceStatuses[n]={code:n,nativeDescription:t}}function e(n,r){return $.ajax({url:i.api+n,mthod:"GET",dataType:"json",data:_.extend({key:t._appKey},r)})}function o(n,t,i){this.Name=n;this.LangCode=t;this.Icon=i}function h(){function f(r,u){i.suportedLangs=r;Object.freeze(i.suportedLangs.dirs);Object.freeze(i.suportedLangs.langs);Object.freeze(i.suportedLangs);_.forEach(i.suportedLangs.langs,function(n,t){i.flagItems.push(new o(n,t,""))});Object.freeze(i.flagItems);u&&n.SaveInStorage(t,r,!0)}var t=s+"suported_langs",u;n.AddKeyToIgnoreClean(t);u=n.GetFromStorage(t,!0);u?f(u):e("getLangs",r.getLangs).then(function(n){f(n,!0)},function(n){console.log("errorAnswer",{errorAnswer:n})})}var i=t.Translate,s="yandex_",f,r;i.api="https://translate.yandex.net/api/v1.5/tr.json/";i.suportedLangs={dirs:[],langs:{}};f={getLangs:"getLangs",detect:"detect",translate:"translate"};r=i.models={formats:{plain:"plain",html:"html"},translate:function(n,t,i,r){function u(){this.text=n;this.lang=t;this.format=i;this.options=r}return new u},getLangs:{ui:"en"},detect:function(n,t){function i(){this.text=n;this.hint=t||["en","es","ru"]}return new i},detectResponce:function(){return{code:null,lang:""}},translateResponce:function(){return{code:null,lang:"",text:[]}}};Object.freeze(i.models.formats);i.responceStatuses={};i.flagItems=[];u(200,"Операция выполнена успешно");u(401,"Неправильный API-ключ");u(402,"API-ключ заблокирован");u(404,"Превышено суточное ограничение на объем переведенного текста");Object.freeze(i.responceStatuses);i.createFlagItem=function(n,t,i){return new o(n,t,i)};h();i.detect=function(n){return e(f.detect,n)};i.translate=function(n){return e(f.translate,n)};i.getLangs=function(){return i.suportedLangs.dirs};i.getDirs=function(){return i.suportedLangs.langs};i.testDetect=function(){function n(n,t){i.detect(r.detect(n)).then(function(n){n.lang===t?console.log("detect.answer: "+t+" -ok",{answer:n}):console.log("detect.answer: "+t+" - fail",{answer:n})},function(n){console.log("detect.errorAnswer",n)})}n("мама мыла раму","ru");n("Mom was washing the frame","en");n("Mamá estaba lavando el marco","es");n("Maman lavait le cadre","fr");n("ママはフレームを洗っていた","ja")};i.testTranslate=function(){function n(n,t,u){i.translate(r.translate(n,t)).then(function(n){n.lang===u?console.log("translate.answer.to:"+t+" - ok",{answer:n,targetLang:t,equalDirection:u}):console.log("translate.answer.to:"+t+" - fail",{answer:answe,targetLang:t,equalDirection:u})},function(n){console.log("detect.errorAnswer",n)})}n("Mom was washing the frame","ru","en-ru");n("мама мыла раму","en","ru-en");n("Mamá estaba lavando el marco","en","es-en");n("ママはフレームを洗っていた","fr","ja-fr");n("Mom was washing the frame","ja","en-ja")}}(Utils.LocalStorage,Utils.Yandex);Utils.LocalStorage.AddKeyToIgnoreClean(Utils.RepoKeys.LsKeys.FloatVoteParams);Utils.LocalStorage.AddKeyToIgnoreClean(Utils.RepoKeys.LsKeys.VoteRegistredData);Utils.ModelFactory={KeyVal:function(n,t){function i(){this.Key=n;this.Val=t}return new i},RequestParams:function(){return{url:"",method:"GET",data:{},onSuccess:null,onError:null}},Vector3:function(){return{X:null,Y:null,Z:null}},IBattleStats:function(n,t){function i(){this.Attack=n||0;this.Hp=t||0}return new i},FileSaver:function(n,t,i,r){return{FileData:n,FileName:t,Ext:i||".json",Catalog:r||"log",SaveToCdn:!1}},BookmarkOut:function(){function n(){this.Id=0;this.TypeId=0;this.TypeName="";this.SubTypeName="";this.ObjectId=0;this.IsFull=!1}return new n},MapItemGeometry:function(n,t,i,r,u,f){function e(){this.Id=n||0;this.NativeName=t||"";this.TextureTypeId=i||null;this.GameTypeId=r||null;this.GalaxyId=u||null;this.SectorId=f||null}return new e},Sector:function(){function t(){this.TranslateName="";this.Translate=Utils.TranslateTextField();this.Position=n.Vector3()}var n=this;return _.extend(new t,this.MapItemGeometry())},EstateListData:function(n){return n?{Name:n.hasOwnProperty("Name")?n.Name:null,Type:n.hasOwnProperty("Type")?n.Type:null,System:n.hasOwnProperty("System")?n.System:null,Sector:n.hasOwnProperty("Sector")?n.Sector:null,Galaxy:n.hasOwnProperty("Galaxy")?n.Galaxy:null,OwnId:n.hasOwnProperty("OwnId")?n.OwnId:null,TextureTypeId:n.hasOwnProperty("TextureTypeId")?n.TextureTypeId:null}:{Name:null,Type:null,System:null,EndSystem:null,Sector:null,Galaxy:null,OwnId:null,TextureTypeId:null}},ItemProgress:function(n){return n?{Level:n.hasOwnProperty("Level")?n.Level:null,StartTime:n.hasOwnProperty("StartTime")?n.StartTime:null,Duration:n.hasOwnProperty("Duration")?n.Duration:null,IsProgress:n.hasOwnProperty("IsProgress")?n.IsProgress:null,RemainToComplete:n.hasOwnProperty("RemainToComplete")?n.RemainToComplete:null}:{Level:null,StartTime:null,Duration:null,IsProgress:null,RemainToComplete:null}},MaterialResources:function(n,t,i){return{E:n||0,Ir:t||0,Dm:i||0}},ConvertToMaterialResourses:function(n){var i={},r=this.MaterialResources();for(var t in r)r.hasOwnProperty(t)&&(i[t]=n.hasOwnProperty(t)?Utils.ConvertToInt(n[t]):0);return i},StorageResources:function(){return{Current:this.MaterialResources(),Max:this.MaterialResources()}},GameResource:function(n,t,i,r,u){var f=this.MaterialResources(n,t,i);return $.extend({TimeProduction:r||null,Cc:u||null},f)},ResourcesView:function(){return{StorageResources:this.StorageResources(),Cc:0}},BuildUpgrade:function(){return{NativeName:"",Progress:this.ItemProgress(),StorageResources:this.StorageResources()}},ResourceItemModel:function(){return{TranslateName:"",NativeName:"",Max:0,Current:0,Percent:0}},BuildDropItemInfo:function(){return{Description:null,DropImage:null}},BuildDropItemAction:function(n){return{ViewPath:"",Data:n}},BuildStorageActions:function(){return{StorageResources:this.StorageResources(),Losses:null}},BuildExtractionModuleActions:function(){return{ExtractionPerHour:this.MaterialResources(),Percent:this.MaterialResources(),Power:null}},BuildEnergyConverterActions:function(){return{StorageResources:this.StorageResources(),ConvertLoses:null}},BuildDropItemUpdate:function(n){var r=[],t,i;if(n&&n.length>0)for(t=0;t<n.length;t++)i=this.BuildPropertyView(),i.PropertyNativeName=n[t],r.push(i);return{Properties:r,Price:this.GameResource()}},BuildPropertyView:function(){return{PropertyName:null,PropertyNativeName:null,CurrentValue:null,NextValue:null}},BuildItemUnitView:function(n){var t=this.BuildDropItemUpdate(),i=null,r=Utils.RepoKeys.DataKeys;return n===r.Storage?(t=this.BuildDropItemUpdate(Utils.RepoKeys.StorageProperties()),i=this.BuildDropItemAction(this.BuildStorageActions())):n===r.EnergyConverter?(t=this.BuildDropItemUpdate(Utils.RepoKeys.EnergyConverterProperties()),i=this.BuildDropItemAction(this.BuildEnergyConverterActions())):n===r.ExtractionModule?(t=this.BuildDropItemUpdate(Utils.RepoKeys.ExtractionModuleProperties()),i=this.BuildDropItemAction(this.BuildExtractionModuleActions())):n===r.Turel?(t=this.BuildDropItemUpdate(Utils.RepoKeys.TurelProperties()),i=this.BuildDropItemAction({})):n===r.SpaceShipyard&&(t=this.BuildDropItemUpdate(Utils.RepoKeys.SpaceShipyardProperties()),i=this.BuildDropItemAction({})),{IconSelf:null,TranslateName:null,NativeName:n,Progress:this.ItemProgress(),Type:null,Info:this.BuildDropItemInfo(),Action:i,Update:t}},TransferResource:function(n){return n?{Resources:n.hasOwnProperty("Resources")?this.MaterialResources(n.Resources.E,n.Resources.Ir,n.Resources.Dm):this.MaterialResources(),SourceId:n.hasOwnProperty("SourceId")?this.MaterialResources(n.SourceId):null,SourceType:n.hasOwnProperty("SourceType")?this.MaterialResources(n.SourceType):null,TargetId:n.hasOwnProperty("TargetId")?this.MaterialResources(n.TargetId):null,TargetType:n.hasOwnProperty("TargetType")?this.MaterialResources(n.TargetType):null}:{Resources:this.MaterialResources(),SourceId:null,SourceType:null,TargetId:null,TargetType:null}},Images:function(n){var t={Source:"",Icon:"",Detail:""};return n?(t.Source=n.hasOwnProperty("Source")&&n.Source!==null?n.Source:t.Detail,t.Icon=n.hasOwnProperty("Icon")&&n.Icon?n.Icon:t.Icon,t.Detail=n.hasOwnProperty("Detail")&&n.Detail?n.Detail:t.Detail,t):t},Label:function(n){return this.Images(n)},Avatar:function(n){return this.Images(n)},SpriteImages:function(n){var t={};return n?(t=this.Images(n),t.Medium=n.hasOwnProperty("Medium")?n.Medium:"",t):(t=this.Images(),t.Medium="",t)},HangarUnitsView:function(n){return{NativeName:n,Name:"",SpriteImages:this.SpriteImages(),Count:null,Progress:this.ItemProgress()}},ListHangarUnitsView:function(){return{Drone:this.HangarUnitsView("Drone"),Frigate:this.HangarUnitsView("Frigate"),Battlecruiser:this.HangarUnitsView("Battlecruiser"),Battleship:this.HangarUnitsView("Battleship"),Drednout:this.HangarUnitsView("Drednout")}},UnitList:function(n,t){return{Drone:n&&n.hasOwnProperty("Drone")&&n.Drone!==null?n.Drone:t?{}:0,Frigate:n&&n.hasOwnProperty("Frigate")&&n.Frigate!==null?n.Frigate:t?{}:0,Battlecruiser:n&&n.hasOwnProperty("Battlecruiser")&&n.Battlecruiser!==null?n.Battlecruiser:t?{}:0,Battleship:n&&n.hasOwnProperty("Battleship")&&n.Battleship!==null?n.Battleship:t?{}:0,Drednout:n&&n.hasOwnProperty("Drednout")&&n.Drednout!==null?n.Drednout:t?{}:0}},TaskFleet:function(n){return n?{SourceId:n.SourceId,TargetName:n.TargetName,IsTransfer:n.IsTransfer,Units:n.hasOwnProperty("Units")&&n.Units!==null?this.UnitList(n.Units):null,TimeOver:n.TimeOver,FlyDuration:n.FlyDuration,StartTime:n.StartTime,IsWin:n.IsWin,BattleResult:n.BattleResult,EstateItemData:this.EstateListData(n.EstateItemData)}:{SourceId:null,TargetName:"",IsTransfer:!1,Units:this.UnitList(),TimeOver:!1,FlyDuration:null,StartTime:null,IsWin:!1,BattleResult:"",EstateItemData:this.EstateListData()}},UnitTurnOut:function(){return{OwnId:null,UserId:0,NativeName:"",Count:1,ForCc:!1}},BodyTemplate:function(n){var t={BodyId:"",LastId:1,TemplateUrl:"",TemplateData:{}};return n?(t.BodyId=n.hasOwnProperty("BodyId")&&n.BodyId!==null?n.BodyId:t.BodyId,t.LastId=n.hasOwnProperty("LastId")&&n.LastId!==null?n.LastId:t.LastId,t.TemplateUrl=n.hasOwnProperty("TemplateUrl")&&n.TemplateUrl!==null?n.TemplateUrl:t.TemplateUrl,t.TemplateData=n.hasOwnProperty("TemplateData")&&n.TemplateData!==null?n.TemplateData:t.TemplateData,t):t},PlanshetHelper:function(n){var t={UniqueId:"",HeadTranslateName:"",Buttons:[],Bodys:[],TemplateUrl:"",HasTabs:!1};return n?(t.UniqueId=n.hasOwnProperty("UniqueId")&&n.UniqueId!==null?n.UniqueId:t.UniqueId,t.HeadTranslateName=n.hasOwnProperty("HeadTranslateName")&&n.HeadTranslateName!==null?n.HeadTranslateName:t.HeadTranslateName,t.Buttons=n.hasOwnProperty("Buttons")&&n.Buttons!==null&&n.Buttons.length>0?function(){for(var i=[],t=0;t<n.Buttons.length;t++)i.push(Utils.ModelFactory.ButtonsView(n.Buttons[t]));return i}():t.Buttons,t.Bodys=n.hasOwnProperty("Bodys")&&n.Bodys!==null&&n.Bodys.length>0?function(){for(var i=[],t=0;t<n.Bodys.length;t++)i.push(Utils.ModelFactory.BodyTemplate(n.Bodys[t]));return i}():t.Bodys,t.TemplateUrl=n.hasOwnProperty("TemplateUrl")&&n.TemplateUrl?n.TemplateUrl:t.TemplateUrl,t.HasTabs=n.hasOwnProperty("HasTabs")&&n.HasTabs?n.HasTabs:t.HasTabs,t):t},SectionItem:function(n){var t={Data:{},Path:"",IsPath:!1,Size:"",ItemId:"",JsFunction:"",IsComplexPart:!1,IsSimpleCentr:!1};return n?(t.Data=n.hasOwnProperty("Data")&&n.Data!==null?n.Data:t.Data,t.Path=n.hasOwnProperty("Path")&&n.Path!==null?n.Path:t.Path,t.IsPath=n.hasOwnProperty("IsPath")&&n.IsPath!==null?n.IsPath:t.IsPath,t.Size=n.hasOwnProperty("Size")&&n.Size!==null?n.Size:t.Size,t.ItemId=n.hasOwnProperty("ItemId")&&n.ItemId!==null?n.ItemId:t.ItemId,t.JsFunction=n.hasOwnProperty("JsFunction")&&n.JsFunction!==null?n.JsFunction:t.JsFunction,t.IsComplexPart=n.hasOwnProperty("IsComplexPart")&&n.IsComplexPart!==null?n.IsComplexPart:t.IsComplexPart,t):t},ComplexButtonList:function(n){var t=this;return{Collection:function(){var r=[],i;if(n&&n.length>0)for(i=0;i<n.length;i++)r.push(t.SectionItem(n[i]));return r}()}},SectionContentViewData:function(n){return{Left:this.SectionItem(n.hasOwnProperty("Left")&&n.Left!==null?n.Left:null),Centr:this.SectionItem(n.hasOwnProperty("Centr")&&n.Centr!==null?n.Centr:null),Right:this.SectionItem(n.hasOwnProperty("Right")&&n.Right!==null?n.Right:null)}},ImageView:function(n){var t={ImagePathOrCss:"",Alt:"",Title:"",IsImage:!1};return n?(t.ImagePathOrCss=n.hasOwnProperty("ImagePathOrCss")&&n.ImagePathOrCss!==null?n.ImagePathOrCss:t.ImagePathOrCss,t.Alt=n.hasOwnProperty("Alt")&&n.Alt!==null?n.Alt:t.Alt,t.Title=n.hasOwnProperty("Title")&&n.Title!==null?n.Title:t.Title,t.IsImage=n.hasOwnProperty("IsImage")&&n.IsImage!==null?n.IsImage:t.IsImage,t):t},AllianceRoleUpdateOut:function(n,t,i){return{AllianceId:n,UserId:t,RoleId:i}},IAllianceUserAccept:function(n,t){function i(){this.UserAccepted=n||!1;this.AllianceAccepted=t||1}return new i},AllianceUserRequestItem:function(n,t,i,r,u){function f(){this.GroupName=n||"";this.GroupId=t||0;this.Messages=i||[]}return _.extend(new f,this.IAllianceUserAccept(r,u))},AllianceRequestMessageDataModel:function(n,t,i,r){function u(){var u=this;this.Id=0;this.SourceType=n||0;this.FromId=t||0;this.FromName=i||"";this.ToId=0;this.ToName="";this.DateCreate=0;this.Message="";this.CreatorIcon=r||null;this._updateFrom=function(n,t,i,r){this.SourceType=n;this.FromId=t;this.FromName=i;this.CreatorIcon=r};this._setFromData=function(n){Utils.UpdateObjData(this,n)};this._setTo=function(n,t){this.ToId=n;this.ToName=t};this._setAll=function(n,t,i,r,u,f,e,o,s,h,c){this._updateFrom(n,t,i,r);this._setTo(u,f);this.DateCreate=e;this.Message=o;this.UserAccepted=s;this.AllianceAccepted=h;this.Id=c};this._clone=function(){return _.cloneDeep(this)};this._getCleanData=function(){return{Id:this.Id,SourceType:this.SourceType,FromId:this.FromId,FromName:this.FromName,ToId:this.ToId,ToName:this.ToName,DateCreate:this.DateCreate,Message:this.Message,UserAccepted:this.UserAccepted,AllianceAccepted:this.AllianceAccepted,CreatorIcon:this.CreatorIcon}}}return _.extend(new u,this.IAllianceUserAccept())},AllianceMessageModelExt:function(n,t,i){function u(){this.Model=r.AllianceRequestMessageDataModel();this.FromAlliance=n;this.AllianceRoleId=t||0;this.AllianceUserId=i||0;this._setModel=function(n,t,i,r){this.Model._updateFrom(n,t,i,r)};this._setFromData=function(n){Utils.UpdateObjData(this,n)};this._clone=function(){return _.cloneDeep(this)};this._getCleanData=function(){return{Model:this.Model._getCleanData(),FromAlliance:this.FromAlliance,AllianceRoleId:this.AllianceRoleId,AllianceUserId:this.AllianceUserId}}}var r=this;return new u},AllianceUserShort:function(n,t,i,r,u,f,e,o){function s(){this.allianceId=n;this.allianceName=t;this.userId=i;this.userName=r;this.allianceUserId=u;this.allianceRoleId=f;this.allianceLabel=e;this.userAvatar=o}return new s},PostSimpleModel:function(n,t){function i(){this.Id=n||0;this.NativeName=t||""}return new i},HubGropItem:function(n,t,i,r){function u(){var u=this;this.GroupId=n||0;this.NativeName=i||"";this.GroupeName=r||"";this.GroupType=t||0;this._updateData=function(n){Utils.UpdateObjData(u,n)}}return new u},ConnectionUser:function(n){function i(){var n=this;this.UserId=0;this.Name="";this.ConnectionId="";this.AllianceId=0;this.AllianceUserId=0;this.AllianceName="";this.AllianceRoleId=0;this.Connected=!1;this.DateLeft=0;this.DateJoin=0;this.Groups={};this._updateData=function(t){if(t.Groups){var i=_.cloneDeep(n.Groups);_.forEach(t.Groups,function(t,r){n.Groups&&n.Groups.hasOwnProperty(r)&&n.Groups[r]?(n.Groups[r]._updateData(t),i[r]=null,delete i[r]):n.Groups.hasOwnProperty(r)&&n.Groups.key||(n.Groups[r]=Utils.ModelFactory.HubGropItem(),n.Groups[r]._updateData(t))});i&&!Utils.CheckObjIsEmpty(i)&&(_.forEach(i,function(t,i){n.Groups[i]=null;delete n.Groups[i]}),i=null)}else this.Groups=null;Utils.UpdateObjData(n,t)}}var t=new i;return n?(t._updateData(n),t):t},IAllianceNameSerchItem:function(n){function i(){var n=this;this.Id=0;this.Name="";this.Disbandet=null;this._updateData=function(t){Utils.UpdateObjData(n,t)};this._setModel=function(n,t,i){this.Id=n;this.Name=t;this.Disbandet=i}}var t=new i;return n?(t._updateData(n),t):t},Base64ImageOut:function(n,t,i){function r(){this.Base64File=i?n:n.split("base64,")[1];this.Ext=t}return new r},IBasePropertyInfo:function(n,t,i,r){function u(){this.OldValue=n;this.NewValue=t;this.PropertyName=i;this.AdvancedData=r}return new u(n,t,i,r)},INotyfyModel:function(n,t){function i(){this.Observerable=t;this.PropertyInfo=n}return new i},IUserImageModel:function(n,t,i){function u(){this.Source=n||"";this.Icon=t||"";this.Detail=i||""}var r=new u;return Object.defineProperty(r,"DefaultMaxLength",{get:function(){return 1e3}}),r},IChannelMessageDataModel:function(n){function i(){this.Id=0;this.ChannelId=0;this.UserId=0;this.UserName="";this.UserIcon="";this.Message="";this.DateCreate=0}var t=new i;return n&&(t.Id=n.Id,t.ChannelId=n.ChannelId,t.UserId=n.UserId,t.UserName=n.UserName,t.UserIcon=n.UserIcon,t.Message=n.Message,t.DateCreate=n.DateCreate),t},IChannelMessageTransfer:function(n){var t=this.IChannelMessageDataModel(n);return t.ChannelType=n?n.ChannelType:0,t},INameIdModel:function(n,t){return{Id:n,Name:t}},IChannelMessageCreateModel:function(n){var t=this.IChannelMessageTransfer(n);return t.To=n?n.To:this.INameIdModel(),t},IChannelDataModel:function(){function n(){this.Id=0;this.Password="";this.ChannelType=0;this.ChannelName="";this.DateCreate=0;this.CreatorId=0;this.CreatorName="";this.ChannelIcon="";this.ChannelConnections=null}return new n},IChannelSerchItem:function(n,t,i){var r=this.INameIdModel(n,t);return r.IsPublic=i,r}};Utils.SiteModelFactory={UchField:function(){return{Id:null,TabelId:null,ProductStoreId:null,ProductTypeId:null,Activated:null,DateActivate:"",DateEndTime:"",DateCreate:null,ProductItemProperty:this.ProductItemProperty()}},ListUchField:function(n){var i=n?!0:!1,t;return i?(t={},_.forEach(n,function(i,r){n.hasOwnProperty(r)&&(t[r]=this.UchField(n[r]))}),t):{}},ConvertListUchField__To__DictUchClientField:function(n,t){var f,i,e,u,r;if(!n||!t){console.log("no data");return}f=n;i=this.DictUchClientField();for(e in f)f.hasOwnProperty(e)&&(u=f[e],r=u.ProductStoreId,i[r]?(i[r].Count++,i[r].Ids.push(u.Id)):(i[r]={},i[r].Count=1,i[r].Ids=[u.Id],i[r].ProductTypeId=u.ProductTypeId,i[r].ProductStoreId=u.ProductStoreId,i[r].Description=u.ProductItemProperty.TranslateText[t].Description,i[r].Name=u.ProductItemProperty.TranslateText[t].Name,i[r].Image=u.ProductItemProperty.ImgCollectionImg.Chest));return i},DictUchClientField:function(n){var i=n?!0:!1,t;return i?(t={},n.hasOwnProperty("Id")&&(t[n.Id]=this.UchClientInactiveField()),t):{}},ProductItemField:function(n){var t=n?!0:!1;return{Id:t&&n.hasOwnProperty("Id")&&n.Id!==null?n.Id:null,ProductTypeId:t&&n.hasOwnProperty("ProductTypeId")&&n.ProductTypeId!==null?n.ProductTypeId:null,Property:t&&n.hasOwnProperty("Property")&&n.Property!==null?n.Property:null}},ProductItemProperty:function(){return{TranslateText:Utils.L10N(),ImgCollectionImg:this.ImgCollectionimgField(),Property:{}}},ImgCollectionimgField:function(n){var t=n?!0:!1;return{Store:t&&n.hasOwnProperty("Store")&&n.Store!==null?n.Store:"",Chest:t&&n.hasOwnProperty("Id")&&n.Chest!==null?n.Chest:""}},PremiumMods:function(){return{Duration:0,TimeBuildUpdate:0,TimeUnitProduction:0,ResourseProduction:0,ResourseMaxStorable:0,ConvertLoses:0,PremiumBookmarkMod:0}}};Utils.A={},function(n){n.getValFromParent=function(t,i){return!t||!i?null:t[i]?t[i]:n.getValFromParent(t.$parent,i)};n.getParentScopeWithProp=function(t,i){return!t||!i?null:t[i]?t:n.getParentScopeWithProp(t.$parent,i)};n.getParentScopeWithPropAndDepth=function(t,i,r){return((r===null||r===undefined)&&(console.log("Utils.A.getParentScopeWithPropAndDepth : param 'maxDepth' not exist value will be set to default 1"),r=1),!t||!i||r<0)?null:t[i]?t:n.getParentScopeWithProp(t.$parent,i,--r)}}(Utils.A),function(){var n=Utils.INT_TO_COLOR_PROP=1/255;Utils.ObjectToVector3=function(n){return new BABYLON.Vector3(n.X,n.Y,n.Z)};Utils.ObjectToColor3=function(n){return n.hasOwnProperty("R")?new BABYLON.Color3(n.R,n.G,n.B):n.hasOwnProperty("r")?new BABYLON.Color3(n.r,n.g,n.b):n.hasOwnProperty("X")?new BABYLON.Color3(n.X,n.Y,n.Z):n.hasOwnProperty("x")?new BABYLON.Color3(n.x,n.y,n.z):(Utils.Console.Error("ColorTypeError Utils.ObjectToColor3",{object:n,suported:"RGB, rgb, XYZ ,xyz (x=r,y=g,z=b)"}),!1)};Utils.ObjectToColor4=function(n){return n.hasOwnProperty("R")?new BABYLON.Color4(n.R,n.G,n.B,n.A):n.hasOwnProperty("r")?new BABYLON.Color4(n.r,n.g,n.b,n.a):void 0};Utils.Color3IntToDecimal=function(t,i){return i||(i=1),new BABYLON.Color3(t.r*n*i,t.g*n*i,t.b*n*i)};Utils.CalcDistanceVector3=function(n,t){var i=t.x-n.x,r=t.y-n.y,u=t.z-n.z;return new BABYLON.Vector3(i,r,u)};Utils.CalcStepDistanceVector3=function(n,t,i){var r=this.CalcDistanceVector3(n,t),u=r.x/i,f=r.y/i,e=r.z/i;return new BABYLON.Vector3(u,f,e)};Utils.CalcAlpha=function(n,t){var i=new BABYLON.Vector2(n.x,n.z),r=new BABYLON.Vector2(t.x,t.z);return new BABYLON.Angle.BetweenTwoPoints(i,r).radians()};Utils.CalcBeta=function(n,t){var i=new BABYLON.Vector2(n.y,n.z),r=new BABYLON.Vector2(t.y,t.z);return Math.cos(new BABYLON.Angle.BetweenTwoPoints(i,r).degrees())};Utils.CalcBetaWhithStep=function(n,t,i){return this.CalcBeta(n,t)/i};Utils.CalcAlphaWhithStep=function(n,t,i){return this.CalcAlpha(n,t)/i};Utils.CalcDisntanse=function(n,t){return BABYLON.Vector3.Distance(n,t)};Utils.CheckNullDistanceVector3=function(n,t){return 0===BABYLON.Vector3.Distance(n,t)};Utils.CalcEndPoint=function(n,t,i){var u=n,f=t,e=this.CalcDisntanse(u,f),o=e-i,r=o/i;-1===r&&(r=-.99999);var s=(u.x+r*f.x)/(1+r),h=(u.y+r*f.y)/(1+r),c=(u.z+r*f.z)/(1+r);return new BABYLON.Vector3(s,h,c)};Utils.GetColor3FromInts=function(n,t){return n?BABYLON.Color3.FromInts(n.r,n.g,n.b):t?t:new BABYLON.Color3(0,0,0)};Utils.SceneSelectTextureFileNames=function(){var n=_.map(EM.Scene.textures,function(n){var t=_.split(n,"/");return{fileName:t[t.length-1]}});return _.orderBy(n,"fileName",["asc"])}}();Utils.CdnManager={GetGameModelsFile:null,GetMatVideoFile:null,GetBjsSprite:null,ContainerNames:null,ContainerCdnUrls:null,ContainerLocalUrls:null},function(n){function s(){return this.babylonSprites="",this.babylonAssets="",this.alliance="",this.user="",this}function g(n){n.babylonSprites=f;n.babylonAssets=i;n.alliance=y;n.user=p}function w(n){n.alliance=a+y+t;n.user=a+p+t}function nt(n){n.babylonSprites=v+f+t;n.babylonAssets=v+i+t;w(n)}function tt(n){n.babylonSprites=l+f+t;n.babylonAssets=l+i+t;w(n)}function k(n,i){return Utils.Parce.EndsWithSeparatorAndReplace(n,i,t)}function d(n,i){return Utils.Parce.StartsWithSeparatorAndReplace(n,i,t)}function e(n,t){if(typeof n!="string")throw new Error("param cataolg is not String");if(n.length<=0)throw new Error("param cataolg is empty");if(n=k(n,!0),t){if(typeof t!="string")throw new Error("param fileName is not String");if(t.length<=0)throw new Error("param fileName is empty");t=d(t,!1)}else t="";return n+t}function r(n){return d(k(n,!0),!1)}function u(t,i){if(!n.ContainerNames.hasOwnProperty(t))throw new Error("invalid containerName, paramName: "+t);return i?n.ContainerLocalUrls[t]:n.ContainerCdnUrls[t]}var l="https://eternplaypublic.blob.core.windows.net/",a="https://skagryuserimages.blob.core.windows.net/",v="/Content/",f="babylon-sprites",i="babylon-assets",y="alliance",p="user",t="/",o="dist",b=new s,h,c;g(b);n.ContainerNames=b;h=new s;tt(h);n.ContainerCdnUrls=h;c=new s;nt(c);n.ContainerLocalUrls=c;n._gameModelsCatalog=null;n.GetGameModelsCatalog=function(f,e){if(n._gameModelsCatalog!=null)return n._gameModelsCatalog;f=f?r(f)+o+t:o+t;var h=u(_.camelCase(i),e),s=h+r("game_models")+r(f);return n._modelsCatalog=s,s};n.GetGameModelsFile=function(t,i,r){var u=n.GetGameModelsCatalog(i,r);return e(u,t)};n.GetMatVideoFile=function(n,r){var f=u(_.camelCase(i),r),o=f+"video_materiales"+t;return e(o,n)};n.GetBjsSprite=function(n,t){var i=u(_.camelCase(f),t);return e(i,n)};n.GetGameObjectsCatalog=function(n,f){n=n?r(n):o+t;var e=u(_.camelCase(i),f);return e+r("game_objects")+r(n)};n.GetBabylonMaterialesCatalog=function(n,t){var e=u(_.camelCase(i),t),f=e+r("babylon_materiales");return n&&(f+=r(n)),f};n.GetCommonTextureUrl=function(n,r){var f=u(_.camelCase(i),r);return f+="common_textures"+t,e(f,n)}}(Utils.CdnManager);Utils.DatGuid={},function(n){function i(){this.min={};this.max={};this.getPropKeys=function(){return Object.keys(this)}}var t;n.getGuid=function(){return t?t:(dat.GUI.prototype.removeFolder||(dat.GUI.prototype.removeFolder=function(n){var t=this.__folders[n];t&&(t.close(),this.__ul.removeChild(t.domElement.parentNode),delete this.__folders[n],this.onResize())},dat.GUI.prototype.getFolder=function(n){return this.__folders[n]}),t=new dat.GUI,t.domElement.style.marginTop="150px",t.domElement.id="datGUI",t.width=500,t)};n.removeMainFolder=function(t){var i=n.getMainFolder(t);i&&n.getGuid().removeFolder(t)};n.getMainFolder=function(t){var i=n.getGuid();return i.getFolder(t)};n.addMainFolder=function(t){var r=n.getGuid(),i=n.getMainFolder(t);return i?i:r.addFolder(t)};n.getFolderFromParent=function(n,t){return n.getFolder(t)};n.getOrAddMaterialFolder=function(t,i){var f,u,e,r;if(!t)throw new Error("material id not exist");if(typeof t=="string"?f=t:(u=t,f=t.id),e="MATERIAL : "+f,r=n.getMainFolder(e),i&&r&&r.removeFolder(),r||(r=n.addMainFolder(e)),!r.__material){if(u||(u=EM.GetMaterial(f)),!u)throw new Error("material not exist");r.__material=u}return r};n.addChildMaterialFolder=function(t,i){var r=n.getOrAddMaterialFolder(t),u=r.getFolder(i);return u?u:r.addFolder(i)};n.getChildMaterialFolder=function(t,i){var r=n.getOrAddMaterialFolder(t);return r.getFolder(i)};n.createTextureView=function(t,i){var f=i.getPropKeys(),u=n.getFolderFromParent(t,i.propertyName),r;return u?u:(r=t.__material,u=n.addChildMaterialFolder(r.id,i.propertyName),_.forEach(f,function(n){if(n==="url"){function e(t){r[i.propertyName][n]!==t&&t&&(i[n]=t,r[i.propertyName].dispose(),delete r[i.propertyName],r[i.propertyName]=new BABYLON.Texture(t,EM.Scene),_.forEach(f,function(n){n!=="url"&&(r[i.propertyName][n]=i[n])}))}e(i[n]);u.add(r[i.propertyName],n,i[n]).onChange(function(n){e(n)})}else{if(r[i.propertyName][n]!==i[n]&&(r[i.propertyName][n]=i[n]),i.min[n]||(i.min[n]=0),!i.max[n]){var t=1;i[n]!==0&&(t=i[n]);t*=50;i.max[n]=t}u.add(r[i.propertyName],n,i.min[n],i.max[n]).onChange(function(t){r[i.propertyName][n]=t})}}),u)};n.createTextureOptions=function(n,t,r){function u(){this.url=t;this.level=r||1;this.uAng=0;this.vAng=0;this.wAng=0;this.vOffset=0;this.uOffset=0;this.uScale=1;this.vScale=1;this.wrapU=1;this.wrapV=1;this.min.level=0;this.min.uAng=0;this.min.vAng=0;this.min.wAng=0;this.min.vOffset=0;this.min.uOffset=0;this.min.uScale=1;this.min.vScale=1;this.min.wrapU=1;this.min.wrapV=1;this.max.level=50;this.max.uAng=3.14;this.max.vAng=3.14;this.max.wAng=3.14;this.max.vOffset=1;this.max.uOffset=1;this.max.uScale=100;this.max.vScale=100;this.max.wrapU=100;this.max.wrapV=100}return u.prototype=new i,u.prototype.constructor=u,u.prototype.propertyName=n,new u};n.createParalaxOptions=function(n,t){function r(){this.useParallax=!1;this.useParallaxOcclusion=!1;this.parallaxScaleBias=0}return r.prototype=new i,r.prototype.constructor=r,r.prototype.bumpUrl=n,r.prototype.paralaxUrl=t,r.prototype.min.parallaxScaleBias=.0001,r.prototype.max.parallaxScaleBias=.2,r.prototype.renderMode=["Parallax Occlusion","Parallax","Bump","None"],r.prototype.bumpLevel=1,r.prototype.min.bumpLevel=0,r.prototype.max.bumpLevel=10,new r};n.createParalaxView=function(t,i){var e=i.getPropKeys(),f="paralaxOptions",u=n.getFolderFromParent(t,f),r;if(u)return u;r=t.__material;u=n.addChildMaterialFolder(r,f);r[n.SUPORTED_TEXTURES.Bump]||(r[n.SUPORTED_TEXTURES.Bump]=new BABYLON.Texture(i.bumpUrl,EM.Scene));_.forEach(e,function(n){if(n==="parallaxScaleBias")u.add(r,n,i.min[n],i.max[n]).onChange(function(t){r[n]=t});else u.add(r,n,r[n]).onChange(function(t){r[n]=t})});u.add(i,"renderMode",i.renderMode).onChange(function(n){function t(n){return r.bumpTexture&&r.bumpTexture.url!==n?(r.bumpTexture.dispose(),delete r.bumpTexture,!0):r.bumpTexture?!1:!0}switch(n){case"Bump":t(i.bumpUrl)&&(r.bumpTexture=new BABYLON.Texture(i.bumpUrl,EM.Scene));r.useParallax=!1;r.useParallaxOcclusion=!1;break;case"Parallax":t(i.paralaxUrl)&&(r.bumpTexture=new BABYLON.Texture(i.paralaxUrl,EM.Scene));r.useParallax=!0;r.useParallaxOcclusion=!1;break;case"Parallax Occlusion":t(i.paralaxUrl)&&(r.bumpTexture=new BABYLON.Texture(i.paralaxUrl,EM.Scene));r.useParallax=!0;r.useParallaxOcclusion=!0;break;case"None":t();r.useParallax=!1;r.useParallaxOcclusion=!1}});u.add(r[n.SUPORTED_TEXTURES.Bump],"level",i.min.bumpLevel,i.max.bumpLevel).onChange(function(t){var i=r[n.SUPORTED_TEXTURES.Bump];i?r[n.SUPORTED_TEXTURES.Bump].level=t:console.log("paralaxFolder bump texture not exist")});return console.log("material",r),u};n.createColor3Options=function(n){function t(){this.r=n.r;this.g=n.g;this.b=n.b}return t.prototype=new i,t.prototype.constructor=t,t.prototype.min.r=0,t.prototype.min.g=0,t.prototype.min.b=0,t.prototype.max.r=1,t.prototype.max.g=1,t.prototype.max.b=1,new t};n.createColor3View=function(t,i){var u=n.getFolderFromParent(t,i),r,f,e;return u?u:(r=t.__material,r[i]||(r[i]=BABYLON.Color3.Black()),u=n.addChildMaterialFolder(r.id,i),f=n.createColor3Options(r[i]),e=f.getPropKeys(),_.forEach(e,function(n){u.add(r[i],n,f.min[n],f.max[n]).onChange(function(t){r[i][n]=t})}),u)};n.createColor3Views=function(t){_.forEach(n.SUPORTED_COLOR3,function(i){n.createColor3View(t,i)})};n.createFresnelOption=function(n,t){function r(){this.isEnabled=!1;this.bias=0;this.power=0;this.leftColor=n;this.rightColor=t}return r.prototype=new i,r.prototype.constructor=r,r.prototype.min.power=0,r.prototype.min.bias=0,r.prototype.max.power=100,r.prototype.max.bias=10,new r};n.createFresnelView=function(t,i){var f=n.getFolderFromParent(t,i),r,u,e,o;if(f)return f;r=t.__material;f=n.addChildMaterialFolder(r.id,i);r[i]||(r[i]=new BABYLON.FresnelParameters,r[i].isEnabled=!1);u=n.createFresnelOption(n.createColor3Options(r[i].leftColor),n.createColor3Options(r[i].rightColor));e=f.addFolder("leftColor");_.forEach(u.leftColor.getPropKeys(),function(n){e.add(r[i].leftColor,n,u.leftColor.min[n],u.leftColor.max[n]).onChange(function(t){r[i].leftColor[n]=t})});o=f.addFolder("rightColor");_.forEach(u.rightColor.getPropKeys(),function(n){o.add(r[i].rightColor,n,u.rightColor.min[n],u.rightColor.max[n]).onChange(function(t){r[i].rightColor[n]=t})});f.add(r[i],"isEnabled",r[i].isEnabled).onChange(function(n){r[i].isEnabled=n});f.add(r[i],"bias",u.min.bias,u.max.bias).onChange(function(n){r[i].bias=n});f.add(r[i],"power",u.min.power,u.max.power).onChange(function(n){r[i].power=n});return f};n.createFresnelAllViews=function(t){_.forEach(n.SUPORTED_FRESNEL_PARAMETERS,function(i){n.createFresnelView(t,i)})};n.createAllMaterialViews=function(t){var i=n.getOrAddMaterialFolder(t.materialIdOrMaterial,!0),r;n.cratePrimitiveMaterialViews(i);n.createColor3Views(i);n.createFresnelAllViews(i);t.dffuseUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Dffuse,t.dffuseUrl,1));t.bumpUrl&&(n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Bump,t.bumpUrl,1)),t.paralaxUrl&&(r=n.createParalaxOptions(t.bumpUrl,t.paralaxUrl),n.createParalaxView(i,r)));t.specularUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Specular,t.Specular,1));t.ambientUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Ambient,t.ambientUrl,1));t.emissiveUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Emissive,t.emissiveUrl,1));t.opacityUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Opacity,t.emissiveUrl,1));t.reflectionUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Reflection,t.reflectionUrl,1));t.lightUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Light,t.lightUrl,1));t.heightUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Height,t.heightUrl,1));t.refractionUrl&&n.createTextureView(i,n.createTextureOptions(n.SUPORTED_TEXTURES.Refraction,t.refractionUrl,1))};n.cratePrimitiveMaterialViews=function(t){var i=t.__material,u="Primetive",r=n.getFolderFromParent(t,u);if(r)return r;r=n.addChildMaterialFolder(i.id,u);r.add(i,"alpha",0,1).onChange(function(n){i.alpha=n});r.add(i,"alphaMode",["ALPHA_DISABLE","ALPHA_COMBINE","ALPHA_ONEONE","ALPHA_ADD","ALPHA_SUBTRACT","ALPHA_MULTIPLY","ALPHA_MAXIMIZED"]).onChange(function(n){switch(n){case"ALPHA_DISABLE":i.alphaMode=BABYLON.Engine.ALPHA_DISABLE;break;case"ALPHA_COMBINE":i.alphaMode=BABYLON.Engine.ALPHA_COMBINE;break;case"ALPHA_ONEONE":i.alphaMode=BABYLON.Engine.ALPHA_ONEONE;break;case"ALPHA_ADD":i.alphaMode=BABYLON.Engine.ALPHA_ADD;break;case"ALPHA_SUBTRACT":i.alphaMode=BABYLON.Engine.ALPHA_SUBTRACT;break;case"ALPHA_MULTIPLY":i.alphaMode=BABYLON.Engine.ALPHA_MULTIPLY;break;case"ALPHA_MAXIMIZED":i.alphaMode=BABYLON.Engine.ALPHA_MAXIMIZED}});r.add(i,"backFaceCulling",i.backFaceCulling).onChange(function(n){i.backFaceCulling=n});r.add(i,"wireframe",i.wireframe).onChange(function(n){i.wireframe=n});r.add(i,"useAlphaFromDiffuseTexture",i.useAlphaFromDiffuseTexture).onChange(function(n){i.useAlphaFromDiffuseTexture=n});r.add(i,"useEmissiveAsIllumination",i.useEmissiveAsIllumination).onChange(function(n){i.useEmissiveAsIllumination=n});r.add(i,"useGlossinessFromSpecularMapAlpha",i.useGlossinessFromSpecularMapAlpha).onChange(function(n){i.useGlossinessFromSpecularMapAlpha=n});r.add(i,"useLightmapAsShadowmap",i.useLightmapAsShadowmap).onChange(function(n){i.useLightmapAsShadowmap=n});r.add(i,"invertNormalMapX",i.invertNormalMapX).onChange(function(n){i.invertNormalMapX=n});r.add(i,"invertNormalMapY",i.invertNormalMapY).onChange(function(n){i.invertNormalMapY=n});r.add(i,"disableLighting",i.disableLighting).onChange(function(n){i.disableLighting=n});r.add(i,"disableDepthWrite",i.disableDepthWrite).onChange(function(n){i.disableDepthWrite=n});r.add(i,"specularPower",0,1e3).onChange(function(n){i.specularPower=n})};n.createAllMaterialOption=function(n){return{materialIdOrMaterial:n,dffuseUrl:null,bumpUrl:null,paralaxUrl:null,specularUrl:null,ambientUrl:null,emissiveUrl:null,opacityUrl:null,reflectionUrl:null,lightUrl:null,heightUrl:null,refractionUrl:null}};n.createMaterialOptionsFromMaterial=function(t,i){var u=n.createAllMaterialOption(t),r;if(i&&i.paralaxUrl&&(u.paralaxUrl=i.paralaxUrl),r=typeof t=="string"?EM.GetMaterial(t):t,!r){console.log("createMaterialOptionsFromMaterial: material not exist",{material:r});return}_.forEach(n.SUPORTED_TEXTURES,function(n,t){if(r[n]&&r[n].url){var i=_.lowerFirst(t)+"Url";u[i]=r[n].url}});n.createAllMaterialViews(u)};n.SUPORTED_TEXTURES={Dffuse:"diffuseTexture",Bump:"bumpTexture",Specular:"specularTexture",Ambient:"ambientTexture",Emissive:"emissiveTexture",Opacity:"opacityTexture",Reflection:"reflectionTexture",Light:"lightTexture",Height:"heightTexture",Refraction:"refractionTexture"};Object.freeze(n.SUPORTED_TEXTURES);n.SUPORTED_COLOR3={diffuseColor:"diffuseColor",emissiveColor:"emissiveColor",ambientColor:"ambientColor",specularColor:"specularColor"};Object.freeze(n.SUPORTED_COLOR3);n.SUPORTED_FRESNEL_PARAMETERS={diffuseFresnelParameters:"diffuseFresnelParameters",opacityFresnelParameters:"opacityFresnelParameters",reflectionFresnelParameters:"reflectionFresnelParameters",emissiveFresnelParameters:"emissiveFresnelParameters",refractionFresnelParameters:"refractionFresnelParameters"};Object.freeze(n.SUPORTED_FRESNEL_PARAMETERS)}(Utils.DatGuid);Utils.Test={},function(n){n.SizeLocalalStorage=function(){function t(n){return[n*1024+1].join("a")}if(!localStorage.getItem("size")){var n=0;try{for(n=0;n<=1e4;n+=250)localStorage.setItem("test",t(n))}catch(i){localStorage.removeItem("test");localStorage.setItem("size",n?n-250:0)}}};n.IterationTest=function(n,t){function h(){for(var n=0;n<s;n++)i.push("test"+Math.random())}function c(n,t){for(var r=Object.keys(n),u=r.length,i=0;i<u;i++)t(r[i])}function l(){for(var t=Date.now(),r=i.length,n=0;n<r;n++)i[n]="test"+Math.random();return Date.now()-t}function a(){var t=Date.now();for(var n in i)i.hasOwnProperty(n)&&(i[n]="test"+Math.random());return Date.now()-t}function v(){var n=Date.now();return c(i,function(n){i[n]="test"+Math.random()}),Date.now()-n}function y(){var n=Date.now();return _.forEach(i,function(n,t){i[t]="test"+Math.random()}),Date.now()-n}function p(){var n=Date.now();return _.forIn(i,function(n,t){i[t]="test"+Math.random()}),Date.now()-n}function w(){for(var i=t||5,n=0;n<i;n++)f+=v(),r+=a(),u+=l(),e+=y(),o+=p()}var i=[],s=n||1e5;h();var r=0,u=0,f=0,e=0,o=0;w();console.log("testTime",{forInTime:r,forTime:u,customForTime:f,lodashForEach:e,lodashForIn:o})}}(Utils.Test),function(n){n.JobPushTest=function(){var n=new Utils.Request("/api/Job/push",function(n){console.log({data:n})});n.getJson()}}(Utils.Test);