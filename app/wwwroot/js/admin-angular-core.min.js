(function(n){"use strict";n.directive("jsonCombiner",[function(){return{restrict:"A",scope:{saveData:"=",jsonCombiner:"@"},link:function(n){n.saveData(JSON.parse(n.jsonCombiner))}}}]);n.service("compileHelper",["$compile","$rootScope",function(n,t){this.$compileItem=function(i){return n(i)(t.$new())};this.$appendHtml=function(n,t){$(n).append(this.$compileItem(t))};this.$replaceWith=function(n,t){$(n).replaceWith(this.$compileItem(t))}}]);n.service("chestService",["$q",function(n){function i(){this.Account=null;this.Premium=null;this.Booster=null;this.Skins=null;this.Cc=null}var t=this;this.CHEST_KEY="UserChest";this.$userChestData=null;this.getProductType=function(){};this.$defaultError=function(n){var t=Errors.GetMessage(n);console.log("errorAnswer",{errorAnswer:n,msg:t})};this.updateChestFromServer=function(i){var r=n.defer();$.ajax({url:"/api/userChest/init/",headers:Utils.XSRF.HeadersGetApiTokenObj(),method:"GET",type:"json"}).then(r.resolve,r.reject);r.promise.then(function(n){t.$setInitChestData(n);i instanceof Function&&i(t.$userChestData)},t.$defaultError)};this.$rebuildChestData=function(n){return t.$userChestData?Utils.UpdateObjData(t.$userChestData,n):t.$userChestData=n,t.$userChestData};this.cleanChestData=function(){t.$userChestData=null};this.getUserChestData=function(){return t.$userChestData||console.log("!$self.$userChestData chest data nit exist",{$self:t}),t.$userChestData};i.prototype.getKeys=function(){return Object.keys(this)};this.ProductTypes=function(){function f(n,t,i){this.LangSimpleProps=i;_.extend(this,Utils.ModelFactory.INameIdModel(n,t))}function e(){}function s(n,t,i){var r=this;this.NativeName=n;this.LangSimple=t;this.setKVConverter(function(n){var t=i?i(n):n;return Utils.ModelFactory.KeyVal(r.LangSimple.getCurrent(),t)})}function n(n,t,i,r){n[t]=new s(t,i,r)}var r,o,h,c;f.prototype.convertToKv=function(n){return this.LangSimpleProps&&this.LangSimpleProps.convertToKv?this.LangSimpleProps.convertToKv(n):[]};e.prototype.convertToKv=function(n){var t=[];return n?(_.forEach(this,function(i,r){console.log("IPropertyes",{val:i,nativeName:r,properties:n,"properties[nativeName]":n[r],"val.convertToKv":i.convertToKv,"val.convertToKv(properties[nativeName])":i.convertToKv(n[r]),"typeof properties[nativeName]":typeof n[r]});i.convertToKv&&n[r]&&typeof n[r]!="object"&&t.push(i.convertToKv(n[r]))}),t):t};s.prototype.setKVConverter=function(n){this.convertToKv=n};var t=Utils.LangSimple,u=new i,l=new e;return u.Account=new f(1,"Account",l),r=new e,n(r,"Duration",t("EN Duration","ES Duration","RU Duration"),Utils.Time.Seconds2Time),n(r,"PremiumBookmarkMod",t("EN PremiumBookmarkMod","ES PremiumBookmarkMod","RU PremiumBookmarkMod"),function(n){return n}),n(r,"PremiumNavigationMod",t("EN PremiumBookmarkMod","ES PremiumBookmarkMod","RU PremiumBookmarkMod"),function(n){return n}),n(r,"ResourseMaxStorable",t("EN ResourseMaxStorable","ES ResourseMaxStorable","RU ResourseMaxStorable"),function(n){return n}),n(r,"ResourseProduction",t("EN ResourseProduction","ES ResourseProduction","RU ResourseProduction"),function(n){return n}),n(r,"TimeBuildUpdate",t("EN TimeBuildUpdate","ES TimeBuildUpdate","RU TimeBuildUpdate"),function(n){return n}),n(r,"TimeUnitProduction",t("EN TimeUnitProduction","ES TimeUnitProduction","RU TimeUnitProduction"),function(n){return n}),u.Premium=new f(2,"Premium",r,function(n){return n}),o=new e,n(o,"Duration",t("EN Duration","ES Duration","RU Duration"),Utils.Time.Seconds2Time),n(o,"Attack",t("EN Attack","ES Attack","RU Attack"),function(n){return n}),n(o,"Hp",t("EN Hp","ES Hp","RU Hp"),function(n){return n}),u.Booster=new f(3,"Booster",o),h=new e,u.Skins=new f(4,"Skins",h),c=new e,u.Cc=new f(5,"Cc",c),Utils.FreezeDeep(u),u}();this.$getTypeByTypeId=function(n){return _.find(t.ProductTypes,function(t){return t.Id===n})};this.createChestItemKVPropertiesView=function(n){var i=t.$getTypeByTypeId(n.ProductTypeId);return i&&i.convertToKv?i.convertToKv(n.ProductItemProperty.Property):[]};this.getActiveDataByTypeId=function(n){var i=t.getUserChestData();return!i||!i.ActivatedItemsView?null:_.find(i.ActivatedItemsView,function(t){return t.ProductTypeId===n})};this.getBalanceCcModel=function(){var n=t.getActiveDataByTypeId(t.ProductTypes.Cc.Id);return!n||!n.Data?null:n.Data.BalanceCc};this.getPremiumModel=function(){var n=t.getActiveDataByTypeId(t.ProductTypes.Premium.Id);return!n||!n.Data?null:n.Data.Premium}}]);n.service("pageHelper",[function(){console.log("pageHelper",this);this.pageName=$("body").data("page-name");this.pageNames={home:"start-page",store:"store-page",account:"account-page",manage:"manage-page",adminStore:"admin-store-page"};this.isPage=function(n){return this.pageName?this.pageName===n:!1};this.$homeInitialized=!1;this.initHome=function(){!this.$homeInitialized&&this.isPage(this.pageNames.home)&&(HomeScroller.Init(),HomeResaizer(),Utils.Response.HomeVideo.Init(),HomeCarousel(),$("iframe").youtubeControl(),this.$homeInitialized=!0)};this.isOtherPage=function(){var i=this.pageNames,t=this.pageName,n;return t?(n=!0,_.forEach(i,function(i){if(i===t)return n=!1,!1}),n):!0};this.isPage(this.pageNames.home)&&this.initHome()}]);n.service("appVarsSerivce",["$rootScope",function(n){this._data=null;this.save=function(n){return this._data=this._data!==null?_.extend(this._data,n):n,this};this.getVars=function(){var n=this._data;return console.log("getVars",{data:n}),this._data};this.add=function(n,t){return n?(this._data===null&&(this._data={}),this._data[n]=t,this):this};this.remove=function(n){if(this._data&&this._data[n])return this._data[n]=null,delete this._data[n],this};this.update=function(t){return Utils.UpdateObjData(this._data,t),n.$broadcast("appVarsSerivce:update",{appVars:this._data}),this}}]);n.directive("appVars",["appVarsSerivce",function(n){return{restrict:"A",scope:{appVars:"@"},link:function(t,i){n.save(JSON.parse(t.appVars));i.remove();console.log("appVars saved",{$scope:t})}}}])})(angular.module("angularAppCommon",[])),function(n){"use strict";n.config(["$mdThemingProvider",function(n){var t=n.theme("default");t.dark();t.primaryPalette("blue-grey");t.accentPalette("blue-grey")}])}(Utils.CoreApp.adminApp=angular.module("adminApp",["ngMaterial","svgAssetsCache","ngSanitize","ngMessages","angularAppCommon","lfNgMdFileInput"]));